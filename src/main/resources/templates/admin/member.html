<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/floating-label.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>회원 관리</title>
    <style>
        /* 전체 화면을 차지하도록 설정 */
        body, html {
            height: 100%;
            margin: 0;
        }
        .container {
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* 상단 정렬 */
        }
        .card {
            margin-bottom: 20px; /* 카드와 테이블 사이의 여백 */
        }
        .table-container {
            width: 100%; /* 테이블이 전체 너비를 차지하도록 설정 */
            overflow-x: auto; /* 가로 스크롤 */
        }
        .table {
            width: 100%; /* 테이블을 전체 너비로 설정 */
        }
        .table th, .table td {
            text-align: center; /* 제목과 데이터 모두 가운데 정렬 */
            vertical-align: middle; /* 데이터도 세로 가운데 정렬 */
            white-space: nowrap; /* 텍스트가 줄 바꿈되지 않도록 설정 */
        }
    </style>
</head>
<body>
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-12 col-md-12 col-sm-12"> <!-- 전체 너비를 차지하도록 수정 -->
            <div class="card shadow">
                <div class="card-header text-center">
                    <h3>회원 정보 검색</h3>
                </div>
                <div class="card-body">
                    <form th:action="@{/admin/member/members}" method="get" id="search_form">
                        <div class="form-group">
                            <input type="text" class="form-control" id="name" name="name" placeholder=" ">
                            <label for="name" class="floating-label">이름</label>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" id="email" name="email" placeholder=" ">
                            <label for="email" class="floating-label">이메일</label>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" id="phoneNumber" name="phoneNumber" placeholder=" ">
                            <label for="phoneNumber" class="floating-label">전화번호</label>
                        </div>
                        <div class="form-group">
                            <label for="gender">성별</label>
                            <select class="form-control" id="gender" name="gender">
                                <option value="" disabled selected hidden>성별을 선택하세요</option>
                                <option value="MALE">남성</option>
                                <option value="FEMALE">여성</option>
                                <option value="OTHER">기타</option>
                                <option value="NULL">선택하지 않음</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="status">상태</label>
                            <select class="form-control" id="status" name="status">
                                <option value="" disabled selected hidden>상태를 선택하세요</option>
                                <option value="ACTIVE">활동</option>
                                <option value="INACTIVE">휴면</option>
                                <option value="WITHDRAWN">탈퇴</option>
                                <option value="NULL">선택하지 않음</option>
                            </select>
                        </div>
                        <div class="form-group row">
                            <label for="page" class="col-sm-4 col-form-label">페이지 번호</label>
                            <div class="col-sm-8">
                                <input type="number" class="form-control" id="page" name="page" value="0" min="0">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="size" class="col-sm-4 col-form-label">페이지 크기</label>
                            <div class="col-sm-8">
                                <input type="number" class="form-control" id="size" name="size" value="10" min="1">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">검색</button>
                    </form>
                </div>
            </div>

            <!-- members가 존재할 때만 테이블 보이기 -->
            <div th:if="${not #lists.isEmpty(members)}" class="table-container">
                <table class="table table-striped table-bordered table-hover mt-4">
                    <thead class="thead-dark">
                        <tr>
                            <th>고객 ID</th>
                            <th>이름</th>
                            <th>성별</th>
                            <th>전화번호</th>
                            <th>이메일</th>
                            <th>생일</th>
                            <th>사용자 ID</th>
                            <th>포인트</th>
                            <th>총 결제 금액</th>
                            <th>권한</th>
                            <th>등급</th>
                            <th>상태</th>
                            <th>가입일</th>
                            <th>최종 로그인 일시</th>
                        </tr>
                    </thead>
                    <tbody>
                    <!-- 각 회원 데이터를 테이블에 출력 -->
                    <tr th:each="result : ${members}">
                        <td th:text="${result.customerId}"></td>
                        <td th:text="${result.name}"></td>
                        <td th:text="${result.gender}"></td>
                        <td th:text="${result.phoneNumber}"></td>
                        <td th:text="${result.email}"></td>
                        <td th:text="${result.birthday}"></td>
                        <td th:text="${result.userId}"></td>
                        <td th:text="${result.point}"></td>
                        <td th:text="${result.totalPaymentAmount}"></td>
                        <td th:text="${result.authority}"></td>
                        <td th:text="${result.gradeName}"></td>
                        <td th:text="${result.status}"></td>
                        <td th:text="${result.createdAt}"></td>
                        <td th:text="${result.latestLoginAt}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- members가 없을 때 메시지 -->
            <div th:if="${#lists.isEmpty(members)}">
                <p class="text-center text-muted">검색된 회원이 없습니다.</p>
            </div>

        </div> <!-- col-lg-12 col-md-12 col-sm-12 (End) -->
    </div> <!-- row justify-content-center (End) -->
</div> <!-- container (End) -->

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>
